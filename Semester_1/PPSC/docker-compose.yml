services:
  # ARM 版本（原生，速度快）
  ppsc-arm:
    build:
      context: .
      dockerfile: Dockerfile
    platform: linux/arm64
    volumes:
      - ./tasks:/workspace/tasks
    stdin_open: true
    tty: true
    working_dir: /workspace/tasks
    init: true
    restart: "no"

  # x86 版本（支持 SSE/AVX 指令，用于 hw4 等 SIMD 作业）
  ppsc-x86:
    build:
      context: .
      dockerfile: Dockerfile
    platform: linux/amd64
    volumes:
      - ./tasks:/workspace/tasks
    stdin_open: true
    tty: true
    working_dir: /workspace/tasks
    init: true
    restart: "no"